<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="width=device-width, initial-scale=1" name="viewport">

  <title>Visitor Checkin</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
  <link href="../css/bootstrap.min.css" rel="stylesheet">
  <link href="../css/bootstrap-overrides.css" rel="stylesheet">
  <link href="../css/admin-overrides.css" rel="stylesheet">
</head>

<body>
  <nav class="navbar navbar-default">
    <div class="container-fluid">
      <div class="navbar-header">
        <a class="navbar-brand" href=
        "http://library.clevelandart.org"><img alt="Ingalls Library home page "
        src="../images/cma-logo.png"></a>
      </div>

      <!-- Since there are only three links run them across the top -->
       <ul class="nav navbar-nav">
         <li class="active"><a href="home.html">Home</a></li>
         <li class="dropdown">
           <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Registrations <span class="caret"></span></a>
           <ul class="dropdown-menu">
             <li><a href="registrations-home.html?status=completed">Archived</a></li>
             <li><a href="registrations-home.html?status=pending">Pending</a></li>
             <li><a href="registrations-home.html">View all</a></li>
           </ul>
         </li>
         <li><a href="usage-home.html">Statistics</a></li>
       </ul>
    </div>
  </nav>

  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <h1>Jane Smith (j.smith2@clevelandart.org)</h1>
      </div>
    </div>

    <div class="row">
      <div class="col-lg-12">
        <h2><span class="glyphicon glyphicon-picture"></span> Docent</h2>
      </div>
    </div>

    <div class="row">
      <form class="form-horizontal">
        <div class="form-group">
          <label for="id_confirmation" class="col-sm-2 control-label">ID Confirmed</label>
          <div class="col-sm-8">
            <p class="form-control-static">Yes</p>
          </div>
        </div>

        <div class="form-group">
          <label for="aleph_id" class="col-sm-2 control-label">Aleph ID</label>
          <div class="col-sm-8" id="aleph_status">
            <button class="btn btn-primary" id="aleph_resolver">Link to Aleph</button>
          </div>
        </div>
      </form>
    </div>

    <div class="row">
      <div class="col-lg-12">
        <dl class="dl-horizontal">
          <dt>Address</dt>
          <dd>123 Main Street
              <br />
              Anytown, OH 44444
          </dd>

          <dt>Telephone</dt>
          <dd>xxx-xxx-xxxx</dd>
         </dl>

         <img class="img-responsive" src="http://placehold.it/600x150">
      </div>
    </div>
  </div>
  <script src="../js/jquery-2.1.3.js" type="text/javascript"></script> 
  <script src="../js/bootstrap.js" type="text/javascript"></script>
  <script type="text/javascript">
    $(document).ready(function() {
      $("#aleph_status").click(function() {
        renderResponse("#interstitial");
        setTimeout(randomizeResult, 4000);
        $(this).off('click');
      });


    });

    function registerSubmitHandler() {
      $("#manual_aleph_override").click(function() {
        renderResponse("#interstitial");
        setTimeout(randomizeResult, 3500);
        event.preventDefault();
      });      
     }

    function renderResponse(template) {
      target = $("#aleph_status");
      content = $(template).html();
      target.html(content);
    }

    function randomizeResult() {
      if (Math.random() > 0.66) {
        renderResponse("#aleph_id_found");
      } else {
        renderResponse("#aleph_id_error");
        registerSubmitHandler();
     }
    }
  </script>
 
  <script type="text/template" id="interstitial">
    <button class="btn" type="button"><i class="fa fa-spinner fa-spin"></i> Validating</button> 
  </script>

  <script type="text/template" id="aleph_id_found">
    <span class="alert alert-success"><i class="fa fa-check-square-o"></i> j.smith </span> 
  </script>
  
  <script type="text/template" id="aleph_id_error">
    <span class="alert alert-danger"><i class="fa fa-exclamation-circle"></i> No match  found.
      <form>
        <input type="text" size="15" name="aleph_id" id="aleph_id" /> 
        <input type="submit" value="Save" id="manual_aleph_override">
      </form>  
    </span>
  </script>
</body>
</html>
